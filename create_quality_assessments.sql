CREATE TABLE quality_assessments (id UUID PRIMARY KEY DEFAULT gen_random_uuid(), produce_id UUID NOT NULL REFERENCES produce(id), source assessment_source_enum NOT NULL DEFAULT 'AI', quality_grade INTEGER NOT NULL, confidence_level DECIMAL(5,2) NOT NULL, defects TEXT[] NULL, recommendations TEXT[] NULL, description TEXT NULL, category produce_category_enum NOT NULL, category_specific_assessment JSONB NOT NULL, metadata JSONB NULL, inspector_id UUID REFERENCES inspectors(id), inspection_request_id UUID REFERENCES inspection_requests(id), created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP, updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP, CONSTRAINT check_quality_grade CHECK (quality_grade >= -1 AND quality_grade <= 10), CONSTRAINT check_confidence_level CHECK (confidence_level >= 0 AND confidence_level <= 100));
